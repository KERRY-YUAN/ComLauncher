@@@@功能说明：
ComLauncher 旨在提供一个集成界面，用于管理 ComfyUI 的设置、更新、节点管理、后台日志查看以及错误诊断与（模拟）修复。界面布局参考了现有 ComfyUI 启动器设计（如铁锅炖、秋叶）。

@@@@文件夹架构：
ComLauncher/
├─ templates/                       # 模板文件（主要是 HTML 模板）
│  └─ icon.ico                     # ico 文件
├─ README.md                        # 项目说明文件
├─ launcher.py                      # 启动器脚本
├─ launcher_config.json             # 启动器配置文件
├─ requirements.txt                 # 依赖项清单
├─ run_requirements.bat             # Windows 依赖安装脚本（BAT 格式）
└─ 运行_launcher.bat             # Windows 启动器脚本（BAT 格式）

@@@@@当前launcher.py节点代码：
@@@@@后端comfyui日志：
@@@@@功能总结：

**界面标签页 (按顺序)：**

1.  **设置**
    *   **布局和内容：** 保留现有布局和功能内容，并进行调整。
    *   **基本路径与端口：**
        *   包含 "ComfyUI 安装目录" 输入框。
        *   包含 "ComfyUI 监听与共享端口" 输入框。
        *   "ComfyUI 监听与共享端口" 输入框右侧有 "打开" 按钮，用于在浏览器中打开该地址。
        *   包含  "Git 路径" 输入框，用于指定 `git.exe` 的位置，程序在需要 Git 操作时调用此路径。
        *   删除 "ComfyUI 工作流目录" 输入框。
		*   删除左下角"保存" 按钮，所有路径和端口设置应能自动保存。
    *   **性能显存优化：** 删除所有包含 "自动" 的相关选项。
    *   **文件夹快捷区域：** 提供按钮快速打开以下文件夹：
        *   `nodes` (对应 `ComfyUI 安装目录\custom_nodes`)
        *   `models` (对应 `ComfyUI 安装目录\models`)
        *   `lora` (对应 `ComfyUI 安装目录\lora`)
        *   `input` (对应 `ComfyUI 安装目录\input`)
        *   `output` (对应 `ComfyUI 安装目录\output`)
        *   `workflows` (对应 `ComfyUI 安装目录\user\default\workflows`)

2.  **管理**
    *   **布局：** 自上而下分为 "仓库地址" 和 "节点管理" 两个区域。
    *   **仓库地址区域：**
        *   "本体仓库地址" 输入框 
        *   "节点配置地址" 输入框 
        *   两个地址修改后应自动保存。
    *   **节点管理区域：** 包含两个子标签页："本体" 和 "节点"。
        *   **本体标签页：**
            *   显示从 "本体仓库地址" 获取的 ComfyUI 本体历史版本列表。
            *   列表内容应准确，并能占满页面区域，配有下拉滑块。
            *   下拉列表时，全量加载本体历史版本信息
            *   选中列表中的版本后，点击 "激活选中版本" 按钮，下载并覆盖安装选定的 ComfyUI 本体版本。
            *   获取本体版本列表的耗时 Git 操作应在单独线程中执行，不阻塞主界面和 ComfyUI 的启动。
        *   **节点标签页：**
            *   顶部有搜索框（在左侧）、 "搜索" 按钮（在右侧）、"刷新列表" 按钮、"切换版本" 按钮、"卸载节点" 按钮、"更新全部" 按钮。
            *   默认列表显示当前 `ComfyUI 安装目录\custom_nodes` 内的全部已安装节点。列表应占满页面区域，配有下拉滑块以显示全部节点。
            *   列表包含以下列信息：
                *   节点名称
				*   状态 (显示节点的安装状态，如已安装、未安装)
                *   本地ID (显示本地 Git 提交的 8 位短 ID，如 `gda254b7`)
                *   仓库ID (显示节点对应 Git 仓库的提交 ID 和更新日期)
                *   仓库地址 (显示节点仓库地址)
			*   "切换版本" 按钮：点击后在单独弹窗中显示该节点的历史版本列表。"版本切换" 弹窗内包含版本、提交 ID、更新日期及对应的 "切换" 按钮。弹窗列表占满窗口，有下拉滑块，下拉时加载更多历史版本信息。选择版本并点击 "切换" 后更新节点到该版本。获取历史版本列表应在单独线程中执行。
			*   "更新全部" 按钮：点击后根据 "仓库ID" 更新当前本地节点。
            *   "刷新列表" 按钮，用于刷新节点列表显示。
            *   在搜索框输入文字并点击 "搜索" 按钮后，列表将显示已安装和未安装的、与搜索条件及 "节点配置地址" 匹配的节点。
            *   读取节点 Git 仓库地址和获取仓库 ID/更新日期等耗时 Git 操作应在单独线程中执行，不阻塞主界面和 ComfyUI 的启动。
    *   **通用：** 更新管理相关的耗时操作（如获取本体/节点列表、获取历史版本）均在单独线程中执行，以优化启动速度，且主界面的 "运行 ComfyUI" 功能不受这些操作完成情况的限制。

3.  **日志**
    *   ** 包含两个子标签页："ComLauncher日志" 和 "ComfyUI日志"。
        *   **ComLauncher日志标签页：**
		*   此标签页独立显示 ComLauncher 启动器程序的全部运行日志。
		*   显示区域占满标签页内部。

        *   **ComfyUI日志标签页：**
		*   此标签页独立显示 ComfyUI 进程的全部运行日志。
		*   显示区域占满标签页内部。
		*   移除原 "Comfyui后台" 标签页顶部的 "运行" 和 "停止" 按钮（这些按钮可能移至主界面的其他位置或删除）。

4.  **分析**
    *   **布局：** 参考原 "Comfyui后台" 标签页布局。
    *   **顶部区域：**
        *   "API接口" 输入框 (可自动保存)。
        *   "API密匙" 输入框 (换行显示，默认为空，输入内容显示为 `*` 号，可自动保存)。
        *   "诊断" 按钮 (在填写 "API接口" 后可点击)。
        *   "修复" 按钮。
    *   **下方区域：** CMD 代码显示框，用于显示诊断结果和模拟修复过程。
    *   **功能逻辑：**
        *   点击 "诊断" 按钮后 (需填写 "API接口" 和 "API密匙")：
            *   将 "日志" 标签页中的"ComLauncher日志" 和 "ComfyUI日志"合并，格式遵循 "日志合并后格式参考" 中定义的规范。
            *   通过填写的 "API接口" 和 "API密匙" 进行联网，将合并后的日志发送给真实的外部 API (例如发送至 Gemini 2.5 API并反馈结果)。
            *   接收 API 返回的分析结果和修复建议。
            *   将 API 的反馈信息显示在 CMD 代码显示框内。
        *   点击 "修复" 按钮后：
            *   筛选 "诊断" 结果中的修复建议。
            *   弹出CMD 代码显示框，依据修复建议操作。（如果实现不了真实的cmd代码框修复，则在 CMD 代码显示框内 *模拟* 逐步运行这些修复命令或操作）。
    *   **日志合并后格式参考：**
            *   @@@@@@@@@设定：
	 	 	 	 你是一位严谨且高效的AI代码工程师和网页设计师，专注于为用户提供精确、可执行的前端及后端代码方案，并精通 ComfyUI 的集成。你的回复始终优先使用中文。@@ComfyUI 集成: 精通 ComfyUI 的 API (/prompt, /upload/image, /ws 等) 调用及数据格式，能够设计和实现前端与 ComfyUI 工作流的对接方案（例如参数注入、结果获取），当ComfyUI 运行出错后可以提供解决方案。
            *   以下为我的运行日志：
            *   @@@@@@@@@ComLauncher后台日志
	 	 	 	 xxxxxxxx（详细日志内容）

            *   @@@@@@@@@ComfyUI日志
	 	 	 	 xxxxxxxx（详细日志内容）

@@@@以下为修改日志：

##20250423
基于launcher.py修改要求：
程序名称为ComLauncher；
参考铁锅炖comfyui界面设定和秋叶comfyui界面设定，重写当前launcher.py。
@@@@@要求1：
删除“前端”标签及相关内容，标签按照顺序修改为：设置、更新管理、Comfyui后台、错误分析；
@@@@标签页面详细信息如下：
@@设置标签页：完全保留现有布局和功能内容。在基本路径与端口界面，增加git路径，默认为：D:\Program\ComfyUI_Program\ComfyUI\git\cmd\git.exe。当本程序任意有需求git调用时，从中调用
基本路径中 api接口改为comfyui界面的监听和远程共享接口，意思是当我设定为8188，则comfyui从127.0.0.1：8188打开，当设定为8189，则comfyui从127.0.0.1：8189打开
性能显存优化，中删除所有“自动”相关选项。

@@更新管理标签页：
自上而下为两个区域：
标签页内顶部为：仓库地址、节点管理
@仓库地址区域有：
本体仓库地址，默认为：https://gitee.com/AIGODLIKE/ComfyUI.git
节点配置地址，默认为：https://raw.githubusercontent.com/ltdrdata/ComfyUI-Manager/main/custom-node-list.json
仓库地址及节点配置地址修改后默认保存。

@节点管理区域有设两个标签页面：本体、节点
本体标签页要求：标签页为列表。通过上述本体仓库地址加载的列表，点击更新时加载当前地址栏填写的对应地址。匹配当前comfyui版本，并可选择列表中的版本激活，点击激活后则下载当前版本并覆盖安装（参考第一张照片视觉效果）；
节点标签页要求：标签页内顶部有搜索框，搜索框以下为列表。列表默认为本地已安装节点及读取对应的github配置地址，点击更新时加载当前地址栏填写的对应地址。列表显示，并配有版本切换选项。搜索框可以搜索匹配节点配置地址，并结合本地已安装节点显示是否已安装，可选择列表中的版本切换（对于未在本地文件则为对应版本下载），点击切换后则下载当前版本并覆盖安装（参考第二张照片视觉效果）；
节点标签页内，列表默认为本地已安装nodes节点列表及读取对应的github配置地址，并配有版本切换选项。

@@Comfyui后台标签页：为现有“后端_comfyui”标签，完全保留现状布局和功能内容，删除标签页内顶部的“运行”和“停止”
@@错误分析标签页：
标签页内，参考“后端_comfyui”标签布局，标签页内顶部为“API接口”填入框，换行显示“API密匙”填入框（“API密匙”填入框默认为空，当填入api后可运行，但是文字显示为*号），“诊断”按钮，“修复”按钮；余下为cmd代码显示框。诊断按钮在填入“API接口”后可运行。
API接口系统设定为“你是一位严谨且高效的AI代码工程师和网页设计师，专注于为用户提供精确、可执行的前端及后端代码方案，并精通 ComfyUI 的集成。你的回复始终优先使用中文。@@ComfyUI 集成: 精通 ComfyUI 的 API (/prompt, /upload/image, /ws 等) 调用及数据格式，能够设计和实现前端与 ComfyUI 工作流的对接方案（例如参数注入、结果获取），当ComfyUI 运行出错后可以提供解决方案。”

运行逻辑（以API接口为google gemini2.5为例）：
点击诊断按钮后，将“Comfyui后台”标签页中的所有信息传入对接API接口，API接口分析后将修改意见输出，并显示在本标签页内的cmd代码显示框内。
点击修复按钮后，将筛选诊断结果，并在当前cmd代码显示框内逐步运行，以修复错误。

##20250424-1
@@@@@要求1：调整更新管理标签页，本体标签页：列表可展示二十条以上版本内容，当下拉滑块后，可继续加载全部版本信息
@@@@@要求2：调整更新管理标签页，节点标签页：列表默认显示为当前ComfyUI\custom_nodes内全部节点。要求全部展示，显示不足可以下拉滑块显示。当其搜索框有文字执行搜索后，才显示已安装和未安装的节点。
@@@@@要求3：调整comfyui后台标签页：调整当前标签页的cmd显示框占满标签页内部
##20250424-2
@@@@@要求1：调整更新管理标签页，本体标签页：列表可展示二十条以上版本内容，且内容为准确信息。当下拉滑块后，可继续加载全部版本信息
@@@@@要求2：调整更新管理标签页，节点标签页：保持默认全部显示为当前ComfyUI\custom_nodes内全部节点。列表中对应各个节点，读取其git仓库地址。
@@@@@要求3：调整更新管理标签页，节点标签页：列表保持默认全部显示为当前ComfyUI\custom_nodes内全部节点。在“状态”与“版本”之前增加“本地版本”显示。其中“本地版本”为本地版本号，“版本”为git仓库当前版本号
##20250424-3
@@@@@要求1：调整更新管理标签页，本体标签页：列表可展示版本内容占满本页，另配有下拉滑块，当列表下拉时，刷新继续加载本本信息，内容为准确信息。
@@@@@要求2：调整更新管理标签页，节点标签页：列表“本地版本”：仅显示其提交ID。如“heads/main-0-gda254b7”显示为“gda254b7”
@@@@@要求3：调整更新管理标签页，节点标签页：列表“版本”：显示其仓库地址当前的提交ID和更新日期
@@@@@要求4：错误分析标签页：“API接口”填入框及“API密匙”填入框填入信息后配置自动保存且“诊断”按钮可运行。
@@@@@另附当前代码后台日志：
##20250424-4
在以下当前代码基础上迭代修改：
@@@@@要求1：
优化启动速度。将更新管理页签的耗时 Git操作（获取本体和节点列表）在单独的线程中执行，避免阻塞主界面（其中，对于本地节点列表的显示可以优先加载）。且主界面”运行“任务不必等git操作完成。
@@@@@要求2：
调整更新管理标签页，本体标签页：列表可展示版本内容占满本页，另配有下拉滑块，当列表下拉时，继续加载本体信息，否则不加载。加载的本体信息内容为准确信息。
@@@@@要求3：
调整更新管理标签页，本体标签页：选中版本后，点击“激活选中版本”则更新当前comfyui本体为对应版本。
@@@@@要求4：
调整更新管理标签页，节点标签页：列表默认显示为当前ComfyUI\custom_nodes内全部节点。要求全部展示，显示不足可以下拉滑块显示。当其搜索框有文字执行搜索后，才显示已安装和未安装的节点。列表“本地版本”名称改为“本地ID”通常为8位的数字及字符，完整显示其提交ID；列表“版本”改为"仓库ID"：显示其仓库地址当前的完整提交ID和更新日期。

##20250425-1

##版本2.5.1
@@@@@要求5：
调整更新管理标签页，节点标签页："切换/安装选择版本"更名为"切换版本"，在"切换版本"右侧，增加"卸载节点"和"更新全部"按钮，点击后可匹配仓库提交ID更新当前本地节点。点击切换版本后，单独线程获取该节点的过往版本ID、对应的描述信息以及更新日期，以单独弹窗显示，窗口名称为"切换版本"。该窗口内，选择对应版本后则更新节点。
@@@@@要求6：
调整更新管理标签页，节点标签页：调整”搜索“和搜索框顺序，左侧为搜索框，右侧为”搜索“，且”搜索“为可执行的按钮。当其搜索框有文字，点击搜索后，显示已安装和未安装的节点。。
@@@@@修正要求7：
迭代更新：调整更新管理标签页，节点标签页："切换版本"按钮赋予功能：点击后，单独弹窗"版本切换"；"版本切换"弹窗内有该节点的版本列表和对应”切换“按钮，内容占满弹窗，另配有下拉滑块，（当列表下拉时，继续加载本体信息，否则不加载。加载的本体信息内容为准确信息。）
列表内，主要显示内容为该节点的各个版本以"版本"、“提交ID”和“更新日期”，然后各个版本配有“切换”按钮。点击后按照选择版本更新节点
单独线程获取该节点的过往版本ID、对应的描述信息以及更新日期，以优化启动速度。
##2.5.2
在以上基础上迭代修改，版本号更新2.5.2，输出完整修改后代码：
@@@@@@修改1：
调整更新管理标签页，节点标签页：取消点击”切换版本“后的confirm确认弹窗，直接在点击”切换版本“后弹出”版本切换“弹窗；"版本切换"弹窗内有该节点的历史版本列表和对应”切换“按钮，内容占满弹窗窗口
@@@@@@修改2：
调整更新管理标签页，节点标签页：列表“本地ID”通常按照git获取配置自动显示8位，不必完整显示；
@@@@@@修改3：
调整更新管理标签页，节点标签页："刷新节点列表"按钮更名为"刷新列表"
@@@@@@修改4：
当前后台无动作时，总窗口顶部进度滑块无动作。
@@@@@@修改5：
调整设置标签页:文件夹快捷区域，文件夹快捷按键、nodes、models、lora、input、output。其地址为获取“ComfyUI 安装目录”地址后对应的为\custom_nodes、\models、\lora、\input、\output地址，如：假设“ComfyUI 安装目录”填写为“D:\Program\ComfyUI”，则点击“models”按钮则打开“D:\Program\ComfyUI\models”文件夹，其他文件夹快捷同理；workflows文件夹除外，workflows文件夹为加载“ComfyUI 安装目录”下的\user\default\workflows目录。
@@@@@@修改6：
调整设置标签页:“基本路径与端口”标签页：删除“ComfyUI 工作流目录”及对应输入框，相应调整布局；
“ComfyUI 监听与共享端口”输入框右侧，增加“打开”按钮，视觉样式同上面的“浏览”按钮。
##2.5.4
##20250427-1
（尚未实现）在以上基础上迭代修改，版本号2.5.4，检查误后输出完整修改后代码：
@@@@@@修改1：调整逻辑：界面打开后，“运行comfyui”即判定可以运行。不受其他加载项的干扰；
@@@@@@修改2：修改标签页，“comfyui后台”，拆分为“后台”标签和“comfyui”标签页：其中：
“后台”标签页：参考原来“comfyui后台”标签页显示效果显示当前程序后台全部日志，
“comfyui”标签页：参考原来“comfyui后台”标签页显示效果显示COMFYUI后台全部日志，
@@@@@@修改3：联网诊断：“错误分析”标签页，当运行“诊断”后，将上述的“后台”标签日志和“comfyui”标签页日志合并，并以
如下“日志合并后格式参考”格式发送给真实的API运行诊断及后续修复处理。
@@@@@@修改4：错误分析标签页内，诊断按钮在填入“API接口”后可运行。点击诊断按钮后，通过“API接口”和“api密匙”实现联网将合并后的日志发送给带密匙的API接口，然后反馈信息；在点击诊断按钮后，根据反馈信息模拟修复（诊断为真实的联网反馈，修复为模拟修复）。
@@@@日志合并后格式参考：
"""
@@@@@@@@@设定：
你是一位严谨且高效的AI代码工程师和网页设计师，专注于为用户提供精确、可执行的前端及后端代码方案，并精通 ComfyUI 的集成。你的回复始终优先使用中文。@@ComfyUI 集成: 精通 ComfyUI 的 API (/prompt, /upload/image, /ws 等) 调用及数据格式，能够设计和实现前端与 ComfyUI 工作流的对接方案（例如参数注入、结果获取），当ComfyUI 运行出错后可以提供解决方案。

以下为我的运行日志：
@@@@@@@@@ComLauncher后台日志
xxxxxxxx（详细日志内容）

@@@@@@@@@ComfyUI日志
xxxxxxxx（详细日志内容）
"""


##回退##2.5.2（2.5.1以后版本获取节点信息错误、API错误、经常语法错误）
在2.5.1基础上重新开始

##2.5.3：在2.5.2基础上，严格保持原有功能，增加以下修改,版本号更新2.5.3
@@@@@修改1：
调整管理标签页，本体标签页：日期信息显示准确完整。
@@@@@修改2：
调整管理标签页，节点标签页：取消点击切换版本后的“确认”弹窗，直接在点击”切换版本“后弹出”版本切换“弹窗，
@@@@@修改3：
调整管理标签页，节点标签页，”版本切换“弹窗：列表内，主要显示内容为该节点的历史版本，列表以"版本"、“状态”、“提交ID”和“更新日期”罗列，视觉效果参考“节点标签页"列表，“状态”为匹配当前安装版本ID和在线仓库的提交ID。
弹窗列表中各历史版本配有“切换”按钮,点击后按照选择版本更新节点；
单独线程获取该节点的过往版本ID、对应的描述信息以及更新日期，以优化启动速度。
@@@@@修改4：
调整分析标签页：除了API填写区域外，cmd窗口占满视口。
提出将api接口及api密匙提交联网，在线连接API以分析诊断的实施方式（重点实现功能）。
@@@@@修改5：
调整日志标签页：标签页内两个标签页窗口打开后均默认将滑块滑至最低部（即当日志有变化时，滑块定位到最新的日志位置）
##部分实现：2.5.4：在2.5.3代码基础上，严格保持现有布局、代码结构和功能，增加以下修改,版本号更新2.5.4
@@@@@修改1：
布局微调：将版本号位置调整至“设置”、“管理”标签页同高位置，水平位置不变，仍在最右侧；
@@@@@修改2：
调整管理标签页，本体标签页：日期信息获取不完整。对日期解析失败部分，以版本号排序显示。排序示意“0.2.31、0.2.22、0.2.15、0.2.3、0.2.2、0.2.1”；
@@@@@修改3：
调整管理标签页，节点标签页，”版本切换“弹窗：视觉风格参考“节点"标签页的列表：版本、状态、提交ID、更新日期、操作栏水平占满弹窗且保证纵向上相垂直的元素对齐。
@@@@@修改4：
调整分析标签页：报错“[ErrorAnalysis]API 请求错误404.请检查 API 端点、密钥和网络连接,详情:”请修正
当前API接口为“https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-04-17”

##部分实现：忘记所有的一切，版本从2.5.4重新开始，版本号更新2.5.5：在2.5.4代码基础上，严格保持现有布局、代码结构和功能，增加以下修改：
@@@@@修改1：
布局微调：版本号位置不变，更新为“Kerry, Ver. 2.5.5”，改为按钮，点击按钮则运行“git pull
pause”更新拉去指令。
@@@@@修改2：
调整顶部“运行comfyui”状态，窗口打开即判定可以运行直至comfyui运行都会保持可运行状态，不受其他加载项的干扰；
@@@@@修改3：
调整管理标签页，节点标签页，”版本切换“弹窗：视觉风格参考“节点"标签页的列表：版本、状态、提交ID、更新日期、操作栏水平占满弹窗且保证纵向上相垂直的元素对齐。
@@@@@修改4：
调整分析标签页：报错“[ErrorAnalysis]API 请求错误404.请检查 API 端点、密钥和网络连接,详情:”请修正
当前API接口为“https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-04-17”
可兼容其他API接口。
@@@@@修改5：
错误修正：点击”节点“标签页后，当前的错误状态：一直显示进度条滚动，及”停止“按钮；整个方式是不对的，请修正。
@@@@@修改6：
错误修正：”comlauncher日志“标签页，在comfyui日志出现后显示为空，这是不对的。即使comfyui在运行，comfyui日志在更新，”comlauncher日志“应该是继续保留基础上继续记录comlauncher日志情况的

##尚未实现：忘记所有的一切，版本从2.5.5重新开始，版本号更新：在代码基础上，严格保持现有布局、代码结构和功能，增加以下修改：
@@@@@修改1：
布局微调：版本号位置不变，将“设置”、“管理”、“日志”、“分析”标签栏位置上移，同版本号位置处于同一高度。
@@@@@修改2：
调整顶部“运行comfyui”状态，窗口打开即判定可以运行直至comfyui运行都会保持可运行状态，不受其他加载项的干扰；运行过程中，只有当开始运行comfyui后，“运行comfyui”才会显示为不可运行状态，不受“停止”干扰。
@@@@@修改3：
调整管理标签页，节点标签页，”版本切换“弹窗：视觉风格参考“节点"标签页的列表：版本、状态、提交ID、更新日期、操作栏水平占满弹窗且保证纵向上相垂直的元素对齐。
@@@@@修改4：
调整分析标签页：报错“[ErrorAnalysis]API 请求错误404.请检查 API 端点、密钥和网络连接,详情:”请修正
当前API接口为“https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-04-17”
可兼容其他API接口。
调整分析标签页：报错：填入api接口和密匙后，无法运行诊断和修复，请修复。
@@@@@修改5：
错误修正：点击”节点“标签页后，当前的错误状态：一直显示进度条滚动，及”停止“按钮；整个方式是不对的，请修正。
@@@@@修改6：
错误修正：”comlauncher日志“标签页，”comlauncher日志“不受“comfyui日志”干扰，在“comfyui日志”出现后在保留基础上继续记录comlauncher日志情况。

@@@@@另附当前代码后台日志：

